c794d40ae8de7ba5ee547f75b0cace90
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppModule = void 0;
const common_1 = require("@nestjs/common");
const config_1 = require("@nestjs/config");
const throttler_1 = require("@nestjs/throttler");
const bull_1 = require("@nestjs/bull");
const core_1 = require("@nestjs/core");
const throttler_2 = require("@nestjs/throttler");
const jwt_auth_guard_1 = require("./common/guards/jwt-auth.guard");
const auth_module_1 = require("./modules/auth/auth.module");
const users_module_1 = require("./modules/users/users.module");
const sessions_module_1 = require("./modules/sessions/sessions.module");
const speakers_module_1 = require("./modules/speakers/speakers.module");
const sponsors_module_1 = require("./modules/sponsors/sponsors.module");
const notifications_module_1 = require("./modules/notifications/notifications.module");
const database_module_1 = require("./modules/database/database.module");
const faq_module_1 = require("./modules/faq/faq.module");
const system_config_module_1 = require("./modules/system-config/system-config.module");
const event_settings_module_1 = require("./modules/event-settings/event-settings.module");
const press_materials_module_1 = require("./modules/press-materials/press-materials.module");
const news_releases_module_1 = require("./modules/news-releases/news-releases.module");
const legal_pages_module_1 = require("./modules/legal-pages/legal-pages.module");
const schedulers_module_1 = require("./common/schedulers/schedulers.module");
const configuration_1 = __importDefault(require("./config/configuration"));
let AppModule = class AppModule {
};
exports.AppModule = AppModule;
exports.AppModule = AppModule = __decorate([
    (0, common_1.Module)({
        imports: [
            config_1.ConfigModule.forRoot({
                isGlobal: true,
                load: [configuration_1.default],
            }),
            throttler_1.ThrottlerModule.forRoot([
                {
                    ttl: 60000, // 1 minute
                    limit: 100, // 100 requests per minute default
                },
            ]),
            bull_1.BullModule.forRootAsync({
                inject: [config_1.ConfigService],
                useFactory: (configService) => ({
                    redis: {
                        host: configService.get('redis.host'),
                        port: configService.get('redis.port'),
                        password: configService.get('redis.password'),
                    },
                }),
            }),
            database_module_1.DatabaseModule,
            auth_module_1.AuthModule,
            users_module_1.UsersModule,
            sessions_module_1.SessionsModule,
            speakers_module_1.SpeakersModule,
            sponsors_module_1.SponsorsModule,
            notifications_module_1.NotificationsModule,
            faq_module_1.FaqModule,
            system_config_module_1.SystemConfigModule,
            event_settings_module_1.EventSettingsModule,
            press_materials_module_1.PressMaterialsModule,
            news_releases_module_1.NewsReleasesModule,
            legal_pages_module_1.LegalPagesModule,
            schedulers_module_1.SchedulersModule,
        ],
        providers: [
            {
                provide: core_1.APP_GUARD,
                useClass: throttler_2.ThrottlerGuard,
            },
            {
                provide: core_1.APP_GUARD,
                useClass: jwt_auth_guard_1.JwtAuthGuard,
            },
        ],
    })
], AppModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbHVpc25ldG85OC9Eb2N1bWVudG9zL0NvZGUvbW9ub3JlcG8tdnRleC9hcHBzL2FwaS9zcmMvYXBwLm1vZHVsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBd0M7QUFDeEMsMkNBQTZEO0FBQzdELGlEQUFvRDtBQUNwRCx1Q0FBMEM7QUFDMUMsdUNBQXlDO0FBQ3pDLGlEQUFtRDtBQUNuRCxtRUFBOEQ7QUFDOUQsNERBQXdEO0FBQ3hELCtEQUEyRDtBQUMzRCx3RUFBb0U7QUFDcEUsd0VBQW9FO0FBQ3BFLHdFQUFvRTtBQUNwRSx1RkFBbUY7QUFDbkYsd0VBQW9FO0FBQ3BFLHlEQUFxRDtBQUNyRCx1RkFBa0Y7QUFDbEYsMEZBQXFGO0FBQ3JGLDZGQUF3RjtBQUN4Rix1RkFBa0Y7QUFDbEYsaUZBQTRFO0FBQzVFLDZFQUF5RTtBQUN6RSwyRUFBbUQ7QUFrRDVDLElBQU0sU0FBUyxHQUFmLE1BQU0sU0FBUztDQUFHLENBQUE7QUFBWiw4QkFBUztvQkFBVCxTQUFTO0lBaERyQixJQUFBLGVBQU0sRUFBQztRQUNOLE9BQU8sRUFBRTtZQUNQLHFCQUFZLENBQUMsT0FBTyxDQUFDO2dCQUNuQixRQUFRLEVBQUUsSUFBSTtnQkFDZCxJQUFJLEVBQUUsQ0FBQyx1QkFBYSxDQUFDO2FBQ3RCLENBQUM7WUFDRiwyQkFBZSxDQUFDLE9BQU8sQ0FBQztnQkFDdEI7b0JBQ0UsR0FBRyxFQUFFLEtBQUssRUFBRSxXQUFXO29CQUN2QixLQUFLLEVBQUUsR0FBRyxFQUFFLGtDQUFrQztpQkFDL0M7YUFDRixDQUFDO1lBQ0YsaUJBQVUsQ0FBQyxZQUFZLENBQUM7Z0JBQ3RCLE1BQU0sRUFBRSxDQUFDLHNCQUFhLENBQUM7Z0JBQ3ZCLFVBQVUsRUFBRSxDQUFDLGFBQTRCLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBQzdDLEtBQUssRUFBRTt3QkFDTCxJQUFJLEVBQUUsYUFBYSxDQUFDLEdBQUcsQ0FBUyxZQUFZLENBQUM7d0JBQzdDLElBQUksRUFBRSxhQUFhLENBQUMsR0FBRyxDQUFTLFlBQVksQ0FBQzt3QkFDN0MsUUFBUSxFQUFFLGFBQWEsQ0FBQyxHQUFHLENBQVMsZ0JBQWdCLENBQUM7cUJBQ3REO2lCQUNGLENBQUM7YUFDSCxDQUFDO1lBQ0YsZ0NBQWM7WUFDZCx3QkFBVTtZQUNWLDBCQUFXO1lBQ1gsZ0NBQWM7WUFDZCxnQ0FBYztZQUNkLGdDQUFjO1lBQ2QsMENBQW1CO1lBQ25CLHNCQUFTO1lBQ1QseUNBQWtCO1lBQ2xCLDJDQUFtQjtZQUNuQiw2Q0FBb0I7WUFDcEIseUNBQWtCO1lBQ2xCLHFDQUFnQjtZQUNoQixvQ0FBZ0I7U0FDakI7UUFDRCxTQUFTLEVBQUU7WUFDVDtnQkFDRSxPQUFPLEVBQUUsZ0JBQVM7Z0JBQ2xCLFFBQVEsRUFBRSwwQkFBYzthQUN6QjtZQUNEO2dCQUNFLE9BQU8sRUFBRSxnQkFBUztnQkFDbEIsUUFBUSxFQUFFLDZCQUFZO2FBQ3ZCO1NBQ0Y7S0FDRixDQUFDO0dBQ1csU0FBUyxDQUFHIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL2x1aXNuZXRvOTgvRG9jdW1lbnRvcy9Db2RlL21vbm9yZXBvLXZ0ZXgvYXBwcy9hcGkvc3JjL2FwcC5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgQ29uZmlnTW9kdWxlLCBDb25maWdTZXJ2aWNlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnO1xuaW1wb3J0IHsgVGhyb3R0bGVyTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90aHJvdHRsZXInO1xuaW1wb3J0IHsgQnVsbE1vZHVsZSB9IGZyb20gJ0BuZXN0anMvYnVsbCc7XG5pbXBvcnQgeyBBUFBfR1VBUkQgfSBmcm9tICdAbmVzdGpzL2NvcmUnO1xuaW1wb3J0IHsgVGhyb3R0bGVyR3VhcmQgfSBmcm9tICdAbmVzdGpzL3Rocm90dGxlcic7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuL2NvbW1vbi9ndWFyZHMvand0LWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgQXV0aE1vZHVsZSB9IGZyb20gJy4vbW9kdWxlcy9hdXRoL2F1dGgubW9kdWxlJztcbmltcG9ydCB7IFVzZXJzTW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL3VzZXJzL3VzZXJzLm1vZHVsZSc7XG5pbXBvcnQgeyBTZXNzaW9uc01vZHVsZSB9IGZyb20gJy4vbW9kdWxlcy9zZXNzaW9ucy9zZXNzaW9ucy5tb2R1bGUnO1xuaW1wb3J0IHsgU3BlYWtlcnNNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvc3BlYWtlcnMvc3BlYWtlcnMubW9kdWxlJztcbmltcG9ydCB7IFNwb25zb3JzTW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL3Nwb25zb3JzL3Nwb25zb3JzLm1vZHVsZSc7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25zTW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL25vdGlmaWNhdGlvbnMvbm90aWZpY2F0aW9ucy5tb2R1bGUnO1xuaW1wb3J0IHsgRGF0YWJhc2VNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvZGF0YWJhc2UvZGF0YWJhc2UubW9kdWxlJztcbmltcG9ydCB7IEZhcU1vZHVsZSB9IGZyb20gJy4vbW9kdWxlcy9mYXEvZmFxLm1vZHVsZSc7XG5pbXBvcnQgeyBTeXN0ZW1Db25maWdNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvc3lzdGVtLWNvbmZpZy9zeXN0ZW0tY29uZmlnLm1vZHVsZSc7XG5pbXBvcnQgeyBFdmVudFNldHRpbmdzTW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL2V2ZW50LXNldHRpbmdzL2V2ZW50LXNldHRpbmdzLm1vZHVsZSc7XG5pbXBvcnQgeyBQcmVzc01hdGVyaWFsc01vZHVsZSB9IGZyb20gJy4vbW9kdWxlcy9wcmVzcy1tYXRlcmlhbHMvcHJlc3MtbWF0ZXJpYWxzLm1vZHVsZSc7XG5pbXBvcnQgeyBOZXdzUmVsZWFzZXNNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvbmV3cy1yZWxlYXNlcy9uZXdzLXJlbGVhc2VzLm1vZHVsZSc7XG5pbXBvcnQgeyBMZWdhbFBhZ2VzTW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL2xlZ2FsLXBhZ2VzL2xlZ2FsLXBhZ2VzLm1vZHVsZSc7XG5pbXBvcnQgeyBTY2hlZHVsZXJzTW9kdWxlIH0gZnJvbSAnLi9jb21tb24vc2NoZWR1bGVycy9zY2hlZHVsZXJzLm1vZHVsZSc7XG5pbXBvcnQgY29uZmlndXJhdGlvbiBmcm9tICcuL2NvbmZpZy9jb25maWd1cmF0aW9uJztcblxuQE1vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb25maWdNb2R1bGUuZm9yUm9vdCh7XG4gICAgICBpc0dsb2JhbDogdHJ1ZSxcbiAgICAgIGxvYWQ6IFtjb25maWd1cmF0aW9uXSxcbiAgICB9KSxcbiAgICBUaHJvdHRsZXJNb2R1bGUuZm9yUm9vdChbXG4gICAgICB7XG4gICAgICAgIHR0bDogNjAwMDAsIC8vIDEgbWludXRlXG4gICAgICAgIGxpbWl0OiAxMDAsIC8vIDEwMCByZXF1ZXN0cyBwZXIgbWludXRlIGRlZmF1bHRcbiAgICAgIH0sXG4gICAgXSksXG4gICAgQnVsbE1vZHVsZS5mb3JSb290QXN5bmMoe1xuICAgICAgaW5qZWN0OiBbQ29uZmlnU2VydmljZV0sXG4gICAgICB1c2VGYWN0b3J5OiAoY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZSkgPT4gKHtcbiAgICAgICAgcmVkaXM6IHtcbiAgICAgICAgICBob3N0OiBjb25maWdTZXJ2aWNlLmdldDxzdHJpbmc+KCdyZWRpcy5ob3N0JyksXG4gICAgICAgICAgcG9ydDogY29uZmlnU2VydmljZS5nZXQ8bnVtYmVyPigncmVkaXMucG9ydCcpLFxuICAgICAgICAgIHBhc3N3b3JkOiBjb25maWdTZXJ2aWNlLmdldDxzdHJpbmc+KCdyZWRpcy5wYXNzd29yZCcpLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSksXG4gICAgRGF0YWJhc2VNb2R1bGUsXG4gICAgQXV0aE1vZHVsZSxcbiAgICBVc2Vyc01vZHVsZSxcbiAgICBTZXNzaW9uc01vZHVsZSxcbiAgICBTcGVha2Vyc01vZHVsZSxcbiAgICBTcG9uc29yc01vZHVsZSxcbiAgICBOb3RpZmljYXRpb25zTW9kdWxlLFxuICAgIEZhcU1vZHVsZSxcbiAgICBTeXN0ZW1Db25maWdNb2R1bGUsXG4gICAgRXZlbnRTZXR0aW5nc01vZHVsZSxcbiAgICBQcmVzc01hdGVyaWFsc01vZHVsZSxcbiAgICBOZXdzUmVsZWFzZXNNb2R1bGUsXG4gICAgTGVnYWxQYWdlc01vZHVsZSxcbiAgICBTY2hlZHVsZXJzTW9kdWxlLFxuICBdLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBBUFBfR1VBUkQsXG4gICAgICB1c2VDbGFzczogVGhyb3R0bGVyR3VhcmQsXG4gICAgfSxcbiAgICB7XG4gICAgICBwcm92aWRlOiBBUFBfR1VBUkQsXG4gICAgICB1c2VDbGFzczogSnd0QXV0aEd1YXJkLFxuICAgIH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuIl0sInZlcnNpb24iOjN9