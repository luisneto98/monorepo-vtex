{"version":3,"names":["cov_ha3dore9g","actualCoverage","mongoose_1","s","require","mongoose_2","NotificationStatus","f","b","exports","Notification","title","message","scheduledAt","sentAt","status","deviceCount","deliveredCount","failedCount","createdBy","segments","metadata","createdAt","updatedAt","__decorate","Prop","required","maxlength","type","Date","String","enum","Object","values","default","DRAFT","Types","ObjectId","ref","Schema","timestamps","NotificationSchema","SchemaFactory","createForClass","index"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/notifications/schemas/notification.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document, Types } from 'mongoose';\n\nexport type NotificationDocument = Notification & Document;\n\nexport enum NotificationStatus {\n  DRAFT = 'draft',\n  SCHEDULED = 'scheduled',\n  SENDING = 'sending',\n  SENT = 'sent',\n  FAILED = 'failed',\n}\n\n@Schema({ timestamps: true })\nexport class Notification {\n  @Prop({ required: true, maxlength: 65 })\n  title: string;\n\n  @Prop({ required: true, maxlength: 240 })\n  message: string;\n\n  @Prop({ type: Date })\n  scheduledAt?: Date;\n\n  @Prop({ type: Date })\n  sentAt?: Date;\n\n  @Prop({\n    type: String,\n    enum: Object.values(NotificationStatus),\n    default: NotificationStatus.DRAFT,\n  })\n  status: NotificationStatus;\n\n  @Prop({ required: true, default: 0 })\n  deviceCount: number;\n\n  @Prop({ default: 0 })\n  deliveredCount: number;\n\n  @Prop({ default: 0 })\n  failedCount: number;\n\n  @Prop({ type: Types.ObjectId, ref: 'User', required: true })\n  createdBy: Types.ObjectId;\n\n  @Prop({ type: [String], default: [] })\n  segments: string[];\n\n  @Prop({ type: Object })\n  metadata?: Record<string, any>;\n\n  @Prop()\n  createdAt: Date;\n\n  @Prop()\n  updatedAt: Date;\n}\n\nexport const NotificationSchema = SchemaFactory.createForClass(Notification);\n\n// Indexes for performance\nNotificationSchema.index({ status: 1, scheduledAt: 1 });\nNotificationSchema.index({ createdBy: 1, createdAt: -1 });\nNotificationSchema.index({ sentAt: -1 });\n"],"mappings":"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","ignoreList":[]}