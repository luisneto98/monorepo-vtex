{"version":3,"names":["cov_27uddhn7wo","actualCoverage","mongoose_1","s","require","DisplayName","__decorate","Prop","required","trim","maxlength","Schema","_id","SponsorTier","name","displayName","order","maxPosts","exports","unique","type","min","default","timestamps","collection","SponsorTierSchema","SchemaFactory","createForClass","index","pre","next","f","b","methods","language"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/sponsors/schemas/sponsor-tier.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document } from 'mongoose';\nimport { SponsorTier as ISponsorTier } from '@shared/types/sponsor.types';\n\nexport type SponsorTierDocument = SponsorTier & Document;\n\n@Schema({ _id: false })\nclass DisplayName {\n  @Prop({\n    required: true,\n    trim: true,\n    maxlength: 50,\n  })\n  'pt-BR': string;\n\n  @Prop({\n    required: true,\n    trim: true,\n    maxlength: 50,\n  })\n  'en': string;\n}\n\n@Schema({ timestamps: true, collection: 'SponsorTier' })\nexport class SponsorTier implements Omit<ISponsorTier, '_id'> {\n  @Prop({\n    required: true,\n    unique: true,\n    trim: true,\n    maxlength: 50,\n  })\n  name: string;\n\n  @Prop({\n    type: DisplayName,\n    required: true,\n  })\n  displayName: {\n    'pt-BR': string;\n    en: string;\n  };\n\n  @Prop({\n    required: true,\n    unique: true,\n    min: 1,\n  })\n  order: number;\n\n  @Prop({\n    required: true,\n    min: 0,\n    default: 5,\n  })\n  maxPosts: number;\n}\n\nexport const SponsorTierSchema = SchemaFactory.createForClass(SponsorTier);\n\n// Indexes\nSponsorTierSchema.index({ order: 1 });\nSponsorTierSchema.index({ name: 1 });\n\n// Pre-save middleware for data normalization\nSponsorTierSchema.pre('save', function (next) {\n  if (this.name) {\n    this.name = this.name.trim();\n  }\n  if (this.displayName) {\n    if (this.displayName['pt-BR']) {\n      this.displayName['pt-BR'] = this.displayName['pt-BR'].trim();\n    }\n    if (this.displayName['en']) {\n      this.displayName['en'] = this.displayName['en'].trim();\n    }\n  }\n  next();\n});\n\n// Schema methods\nSponsorTierSchema.methods['getLocalizedName'] = function (language: 'pt-BR' | 'en'): string {\n  return this['displayName'][language] || this['displayName']['pt-BR'];\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}