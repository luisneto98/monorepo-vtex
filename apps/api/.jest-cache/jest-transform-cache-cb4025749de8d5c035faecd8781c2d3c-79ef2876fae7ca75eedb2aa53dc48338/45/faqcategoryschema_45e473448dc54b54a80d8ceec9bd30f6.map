{"version":3,"names":["cov_kfosaiml3","actualCoverage","mongoose_1","s","require","Name","__decorate","Prop","required","unique","maxlength","trim","Schema","_id","FaqCategory","name","order","exports","type","min","timestamps","collection","FaqCategorySchema","SchemaFactory","createForClass","index","pre","next","f","b","methods","language"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/faq/schemas/faq-category.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document } from 'mongoose';\nimport { FaqCategory as IFaqCategory } from '@shared/types/faq.types';\n\nexport type FaqCategoryDocument = FaqCategory & Document;\n\n@Schema({ _id: false })\nclass Name {\n  @Prop({\n    required: true,\n    unique: true,\n    maxlength: 50,\n    trim: true,\n  })\n  'pt-BR': string;\n\n  @Prop({\n    required: true,\n    unique: true,\n    maxlength: 50,\n    trim: true,\n  })\n  'en': string;\n}\n\n@Schema({ timestamps: true, collection: 'FaqCategory' })\nexport class FaqCategory implements Omit<IFaqCategory, '_id'> {\n  @Prop({\n    type: Name,\n    required: true,\n  })\n  name: {\n    'pt-BR': string;\n    en: string;\n  };\n\n  @Prop({\n    required: true,\n    unique: true,\n    min: 0,\n  })\n  order: number;\n}\n\nexport const FaqCategorySchema = SchemaFactory.createForClass(FaqCategory);\n\n// Indexes\nFaqCategorySchema.index({ order: 1 });\nFaqCategorySchema.index({ 'name.pt-BR': 1 });\nFaqCategorySchema.index({ 'name.en': 1 });\n\n// Pre-save middleware for data normalization\nFaqCategorySchema.pre('save', function (next) {\n  if (this.name) {\n    if (this.name['pt-BR']) {\n      this.name['pt-BR'] = this.name['pt-BR'].trim();\n    }\n    if (this.name['en']) {\n      this.name['en'] = this.name['en'].trim();\n    }\n  }\n  next();\n});\n\n// Schema methods\nFaqCategorySchema.methods['getLocalizedName'] = function (language: 'pt-BR' | 'en'): string {\n  return this['name'][language] || this['name']['pt-BR'];\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBe;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC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","ignoreList":[]}