0f54f99d7518ce4315c0569b08315dda
"use strict";

/* istanbul ignore next */
function cov_29e27zkmsq() {
  var path = "/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/common/filters/all-exceptions.filter.ts";
  var hash = "76b0ef0fcef93ddd1bd6f0304c1608c8728b1d4e";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/common/filters/all-exceptions.filter.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 17
        },
        end: {
          line: 7,
          column: 1
        }
      },
      "1": {
        start: {
          line: 3,
          column: 12
        },
        end: {
          line: 3,
          column: 28
        }
      },
      "2": {
        start: {
          line: 3,
          column: 34
        },
        end: {
          line: 3,
          column: 125
        }
      },
      "3": {
        start: {
          line: 4,
          column: 4
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "4": {
        start: {
          line: 4,
          column: 79
        },
        end: {
          line: 4,
          column: 131
        }
      },
      "5": {
        start: {
          line: 5,
          column: 9
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "6": {
        start: {
          line: 5,
          column: 22
        },
        end: {
          line: 5,
          column: 43
        }
      },
      "7": {
        start: {
          line: 5,
          column: 58
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "8": {
        start: {
          line: 5,
          column: 81
        },
        end: {
          line: 5,
          column: 150
        }
      },
      "9": {
        start: {
          line: 6,
          column: 4
        },
        end: {
          line: 6,
          column: 66
        }
      },
      "10": {
        start: {
          line: 9,
          column: 0
        },
        end: {
          line: 9,
          column: 62
        }
      },
      "11": {
        start: {
          line: 10,
          column: 0
        },
        end: {
          line: 10,
          column: 37
        }
      },
      "12": {
        start: {
          line: 11,
          column: 17
        },
        end: {
          line: 11,
          column: 42
        }
      },
      "13": {
        start: {
          line: 12,
          column: 26
        },
        end: {
          line: 52,
          column: 1
        }
      },
      "14": {
        start: {
          line: 13,
          column: 13
        },
        end: {
          line: 13,
          column: 60
        }
      },
      "15": {
        start: {
          line: 15,
          column: 20
        },
        end: {
          line: 15,
          column: 39
        }
      },
      "16": {
        start: {
          line: 16,
          column: 25
        },
        end: {
          line: 16,
          column: 42
        }
      },
      "17": {
        start: {
          line: 17,
          column: 21
        },
        end: {
          line: 17,
          column: 62
        }
      },
      "18": {
        start: {
          line: 18,
          column: 22
        },
        end: {
          line: 18,
          column: 45
        }
      },
      "19": {
        start: {
          line: 19,
          column: 19
        },
        end: {
          line: 19,
          column: 40
        }
      },
      "20": {
        start: {
          line: 20,
          column: 22
        },
        end: {
          line: 20,
          column: 31
        }
      },
      "21": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 38,
          column: 9
        }
      },
      "22": {
        start: {
          line: 22,
          column: 12
        },
        end: {
          line: 22,
          column: 43
        }
      },
      "23": {
        start: {
          line: 23,
          column: 38
        },
        end: {
          line: 23,
          column: 61
        }
      },
      "24": {
        start: {
          line: 24,
          column: 12
        },
        end: {
          line: 24,
          column: 46
        }
      },
      "25": {
        start: {
          line: 25,
          column: 12
        },
        end: {
          line: 32,
          column: 13
        }
      },
      "26": {
        start: {
          line: 26,
          column: 36
        },
        end: {
          line: 26,
          column: 53
        }
      },
      "27": {
        start: {
          line: 27,
          column: 16
        },
        end: {
          line: 27,
          column: 67
        }
      },
      "28": {
        start: {
          line: 28,
          column: 16
        },
        end: {
          line: 28,
          column: 46
        }
      },
      "29": {
        start: {
          line: 31,
          column: 16
        },
        end: {
          line: 31,
          column: 44
        }
      },
      "30": {
        start: {
          line: 34,
          column: 13
        },
        end: {
          line: 38,
          column: 9
        }
      },
      "31": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 35,
          column: 40
        }
      },
      "32": {
        start: {
          line: 36,
          column: 12
        },
        end: {
          line: 36,
          column: 34
        }
      },
      "33": {
        start: {
          line: 37,
          column: 12
        },
        end: {
          line: 37,
          column: 92
        }
      },
      "34": {
        start: {
          line: 40,
          column: 26
        },
        end: {
          line: 40,
          column: 84
        }
      },
      "35": {
        start: {
          line: 41,
          column: 30
        },
        end: {
          line: 49,
          column: 9
        }
      },
      "36": {
        start: {
          line: 50,
          column: 8
        },
        end: {
          line: 50,
          column: 52
        }
      },
      "37": {
        start: {
          line: 53,
          column: 0
        },
        end: {
          line: 53,
          column: 50
        }
      },
      "38": {
        start: {
          line: 54,
          column: 0
        },
        end: {
          line: 56,
          column: 24
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 2,
            column: 47
          }
        },
        loc: {
          start: {
            line: 2,
            column: 87
          },
          end: {
            line: 7,
            column: 1
          }
        },
        line: 2
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 14,
            column: 5
          }
        },
        loc: {
          start: {
            line: 14,
            column: 27
          },
          end: {
            line: 51,
            column: 5
          }
        },
        line: 14
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 2,
            column: 17
          },
          end: {
            line: 7,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 2,
            column: 18
          },
          end: {
            line: 2,
            column: 22
          }
        }, {
          start: {
            line: 2,
            column: 26
          },
          end: {
            line: 2,
            column: 41
          }
        }, {
          start: {
            line: 2,
            column: 46
          },
          end: {
            line: 7,
            column: 1
          }
        }],
        line: 2
      },
      "1": {
        loc: {
          start: {
            line: 3,
            column: 34
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 42
          },
          end: {
            line: 3,
            column: 48
          }
        }, {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "2": {
        loc: {
          start: {
            line: 3,
            column: 51
          },
          end: {
            line: 3,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 67
          },
          end: {
            line: 3,
            column: 118
          }
        }, {
          start: {
            line: 3,
            column: 121
          },
          end: {
            line: 3,
            column: 125
          }
        }],
        line: 3
      },
      "3": {
        loc: {
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 4,
            column: 4
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: 5,
            column: 9
          },
          end: {
            line: 5,
            column: 150
          }
        }],
        line: 4
      },
      "4": {
        loc: {
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 77
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 4,
            column: 8
          },
          end: {
            line: 4,
            column: 35
          }
        }, {
          start: {
            line: 4,
            column: 39
          },
          end: {
            line: 4,
            column: 77
          }
        }],
        line: 4
      },
      "5": {
        loc: {
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 5,
            column: 58
          },
          end: {
            line: 5,
            column: 150
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 5
      },
      "6": {
        loc: {
          start: {
            line: 5,
            column: 85
          },
          end: {
            line: 5,
            column: 149
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        }, {
          start: {
            line: 5,
            column: 148
          },
          end: {
            line: 5,
            column: 149
          }
        }],
        line: 5
      },
      "7": {
        loc: {
          start: {
            line: 5,
            column: 86
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 94
          },
          end: {
            line: 5,
            column: 98
          }
        }, {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "8": {
        loc: {
          start: {
            line: 5,
            column: 101
          },
          end: {
            line: 5,
            column: 143
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 5,
            column: 109
          },
          end: {
            line: 5,
            column: 126
          }
        }, {
          start: {
            line: 5,
            column: 129
          },
          end: {
            line: 5,
            column: 143
          }
        }],
        line: 5
      },
      "9": {
        loc: {
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 6,
            column: 11
          },
          end: {
            line: 6,
            column: 16
          }
        }, {
          start: {
            line: 6,
            column: 20
          },
          end: {
            line: 6,
            column: 21
          }
        }, {
          start: {
            line: 6,
            column: 25
          },
          end: {
            line: 6,
            column: 62
          }
        }],
        line: 6
      },
      "10": {
        loc: {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 38,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 38,
            column: 9
          }
        }, {
          start: {
            line: 34,
            column: 13
          },
          end: {
            line: 38,
            column: 9
          }
        }],
        line: 21
      },
      "11": {
        loc: {
          start: {
            line: 25,
            column: 12
          },
          end: {
            line: 32,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 25,
            column: 12
          },
          end: {
            line: 32,
            column: 13
          }
        }, {
          start: {
            line: 30,
            column: 17
          },
          end: {
            line: 32,
            column: 13
          }
        }],
        line: 25
      },
      "12": {
        loc: {
          start: {
            line: 25,
            column: 16
          },
          end: {
            line: 25,
            column: 83
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 25,
            column: 16
          },
          end: {
            line: 25,
            column: 53
          }
        }, {
          start: {
            line: 25,
            column: 57
          },
          end: {
            line: 25,
            column: 83
          }
        }],
        line: 25
      },
      "13": {
        loc: {
          start: {
            line: 27,
            column: 26
          },
          end: {
            line: 27,
            column: 66
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 27,
            column: 26
          },
          end: {
            line: 27,
            column: 45
          }
        }, {
          start: {
            line: 27,
            column: 49
          },
          end: {
            line: 27,
            column: 66
          }
        }],
        line: 27
      },
      "14": {
        loc: {
          start: {
            line: 34,
            column: 13
          },
          end: {
            line: 38,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 34,
            column: 13
          },
          end: {
            line: 38,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 34
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0],
      "13": [0, 0],
      "14": [0, 0]
    },
    inputSourceMap: {
      file: "/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/common/filters/all-exceptions.filter.ts",
      mappings: ";;;;;;;;;;AAAA,2CAOwB;AAIjB,IAAM,mBAAmB,2BAAzB,MAAM,mBAAmB;IACb,MAAM,GAAG,IAAI,eAAM,CAAC,qBAAmB,CAAC,IAAI,CAAC,CAAC;IAE/D,KAAK,CAAC,SAAkB,EAAE,IAAmB;QAC3C,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAChC,MAAM,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAY,CAAC;QAE7C,IAAI,MAAM,GAAG,mBAAU,CAAC,qBAAqB,CAAC;QAC9C,IAAI,OAAO,GAAG,uBAAuB,CAAC;QACtC,IAAI,IAAI,GAAG,qBAAqB,CAAC;QACjC,IAAI,OAAO,GAAQ,SAAS,CAAC;QAE7B,IAAI,SAAS,YAAY,sBAAa,EAAE,CAAC;YACvC,MAAM,GAAG,SAAS,CAAC,SAAS,EAAE,CAAC;YAC/B,MAAM,iBAAiB,GAAG,SAAS,CAAC,WAAW,EAAE,CAAC;YAClD,IAAI,GAAG,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC;YAElC,IAAI,OAAO,iBAAiB,KAAK,QAAQ,IAAI,iBAAiB,KAAK,IAAI,EAAE,CAAC;gBACxE,MAAM,WAAW,GAAG,iBAAwB,CAAC;gBAC7C,OAAO,GAAG,WAAW,CAAC,OAAO,IAAI,SAAS,CAAC,OAAO,CAAC;gBACnD,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC;YAChC,CAAC;iBAAM,CAAC;gBACN,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;YAC9B,CAAC;QACH,CAAC;aAAM,IAAI,SAAS,YAAY,KAAK,EAAE,CAAC;YACtC,OAAO,GAAG,SAAS,CAAC,OAAO,CAAC;YAC5B,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;YAEtB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,wBAAwB,SAAS,CAAC,OAAO,EAAE,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC;QAClF,CAAC;QAED,mCAAmC;QACnC,MAAM,SAAS,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;QAE7E,MAAM,aAAa,GAAG;YACpB,KAAK,EAAE;gBACL,IAAI;gBACJ,OAAO;gBACP,OAAO;gBACP,SAAS,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;gBACnC,SAAS;aACV;SACF,CAAC;QAEF,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC9C,CAAC;CACF,CAAA;AA9CY,kDAAmB;8BAAnB,mBAAmB;IAD/B,IAAA,cAAK,GAAE;GACK,mBAAmB,CA8C/B",
      names: [],
      sources: ["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/common/filters/all-exceptions.filter.ts"],
      sourcesContent: ["import {\n  ExceptionFilter,\n  Catch,\n  ArgumentsHost,\n  HttpException,\n  HttpStatus,\n  Logger,\n} from '@nestjs/common';\nimport { Response } from 'express';\n\n@Catch()\nexport class AllExceptionsFilter implements ExceptionFilter {\n  private readonly logger = new Logger(AllExceptionsFilter.name);\n\n  catch(exception: unknown, host: ArgumentsHost) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse<Response>();\n\n    let status = HttpStatus.INTERNAL_SERVER_ERROR;\n    let message = 'Internal server error';\n    let code = 'InternalServerError';\n    let details: any = undefined;\n\n    if (exception instanceof HttpException) {\n      status = exception.getStatus();\n      const exceptionResponse = exception.getResponse();\n      code = exception.constructor.name;\n\n      if (typeof exceptionResponse === 'object' && exceptionResponse !== null) {\n        const responseObj = exceptionResponse as any;\n        message = responseObj.message || exception.message;\n        details = responseObj.details;\n      } else {\n        message = exception.message;\n      }\n    } else if (exception instanceof Error) {\n      message = exception.message;\n      code = exception.name;\n\n      this.logger.error(`Unhandled exception: ${exception.message}`, exception.stack);\n    }\n\n    // Generate request ID for tracking\n    const requestId = `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n    const errorResponse = {\n      error: {\n        code,\n        message,\n        details,\n        timestamp: new Date().toISOString(),\n        requestId,\n      },\n    };\n\n    response.status(status).json(errorResponse);\n  }\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "76b0ef0fcef93ddd1bd6f0304c1608c8728b1d4e"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_29e27zkmsq = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_29e27zkmsq();
var __decorate =
/* istanbul ignore next */
(cov_29e27zkmsq().s[0]++,
/* istanbul ignore next */
(cov_29e27zkmsq().b[0][0]++, this) &&
/* istanbul ignore next */
(cov_29e27zkmsq().b[0][1]++, this.__decorate) ||
/* istanbul ignore next */
(cov_29e27zkmsq().b[0][2]++, function (decorators, target, key, desc) {
  /* istanbul ignore next */
  cov_29e27zkmsq().f[0]++;
  var c =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[1]++, arguments.length),
    r =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[2]++, c < 3 ?
    /* istanbul ignore next */
    (cov_29e27zkmsq().b[1][0]++, target) :
    /* istanbul ignore next */
    (cov_29e27zkmsq().b[1][1]++, desc === null ?
    /* istanbul ignore next */
    (cov_29e27zkmsq().b[2][0]++, desc = Object.getOwnPropertyDescriptor(target, key)) :
    /* istanbul ignore next */
    (cov_29e27zkmsq().b[2][1]++, desc))),
    d;
  /* istanbul ignore next */
  cov_29e27zkmsq().s[3]++;
  if (
  /* istanbul ignore next */
  (cov_29e27zkmsq().b[4][0]++, typeof Reflect === "object") &&
  /* istanbul ignore next */
  (cov_29e27zkmsq().b[4][1]++, typeof Reflect.decorate === "function")) {
    /* istanbul ignore next */
    cov_29e27zkmsq().b[3][0]++;
    cov_29e27zkmsq().s[4]++;
    r = Reflect.decorate(decorators, target, key, desc);
  } else {
    /* istanbul ignore next */
    cov_29e27zkmsq().b[3][1]++;
    cov_29e27zkmsq().s[5]++;
    for (var i =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[6]++, decorators.length - 1); i >= 0; i--) {
      /* istanbul ignore next */
      cov_29e27zkmsq().s[7]++;
      if (d = decorators[i]) {
        /* istanbul ignore next */
        cov_29e27zkmsq().b[5][0]++;
        cov_29e27zkmsq().s[8]++;
        r =
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[6][0]++, c < 3 ?
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[7][0]++, d(r)) :
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[7][1]++, c > 3 ?
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[8][0]++, d(target, key, r)) :
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[8][1]++, d(target, key)))) ||
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[6][1]++, r);
      } else
      /* istanbul ignore next */
      {
        cov_29e27zkmsq().b[5][1]++;
      }
    }
  }
  /* istanbul ignore next */
  cov_29e27zkmsq().s[9]++;
  return /* istanbul ignore next */(cov_29e27zkmsq().b[9][0]++, c > 3) &&
  /* istanbul ignore next */
  (cov_29e27zkmsq().b[9][1]++, r) &&
  /* istanbul ignore next */
  (cov_29e27zkmsq().b[9][2]++, Object.defineProperty(target, key, r)), r;
}));
var AllExceptionsFilter_1;
/* istanbul ignore next */
cov_29e27zkmsq().s[10]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_29e27zkmsq().s[11]++;
exports.AllExceptionsFilter = void 0;
const common_1 =
/* istanbul ignore next */
(cov_29e27zkmsq().s[12]++, require("@nestjs/common"));
let AllExceptionsFilter =
/* istanbul ignore next */
(cov_29e27zkmsq().s[13]++, AllExceptionsFilter_1 = class AllExceptionsFilter {
  logger =
  /* istanbul ignore next */
  (cov_29e27zkmsq().s[14]++, new common_1.Logger(AllExceptionsFilter_1.name));
  catch(exception, host) {
    /* istanbul ignore next */
    cov_29e27zkmsq().f[1]++;
    const ctx =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[15]++, host.switchToHttp());
    const response =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[16]++, ctx.getResponse());
    let status =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[17]++, common_1.HttpStatus.INTERNAL_SERVER_ERROR);
    let message =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[18]++, 'Internal server error');
    let code =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[19]++, 'InternalServerError');
    let details =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[20]++, undefined);
    /* istanbul ignore next */
    cov_29e27zkmsq().s[21]++;
    if (exception instanceof common_1.HttpException) {
      /* istanbul ignore next */
      cov_29e27zkmsq().b[10][0]++;
      cov_29e27zkmsq().s[22]++;
      status = exception.getStatus();
      const exceptionResponse =
      /* istanbul ignore next */
      (cov_29e27zkmsq().s[23]++, exception.getResponse());
      /* istanbul ignore next */
      cov_29e27zkmsq().s[24]++;
      code = exception.constructor.name;
      /* istanbul ignore next */
      cov_29e27zkmsq().s[25]++;
      if (
      /* istanbul ignore next */
      (cov_29e27zkmsq().b[12][0]++, typeof exceptionResponse === 'object') &&
      /* istanbul ignore next */
      (cov_29e27zkmsq().b[12][1]++, exceptionResponse !== null)) {
        /* istanbul ignore next */
        cov_29e27zkmsq().b[11][0]++;
        const responseObj =
        /* istanbul ignore next */
        (cov_29e27zkmsq().s[26]++, exceptionResponse);
        /* istanbul ignore next */
        cov_29e27zkmsq().s[27]++;
        message =
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[13][0]++, responseObj.message) ||
        /* istanbul ignore next */
        (cov_29e27zkmsq().b[13][1]++, exception.message);
        /* istanbul ignore next */
        cov_29e27zkmsq().s[28]++;
        details = responseObj.details;
      } else {
        /* istanbul ignore next */
        cov_29e27zkmsq().b[11][1]++;
        cov_29e27zkmsq().s[29]++;
        message = exception.message;
      }
    } else {
      /* istanbul ignore next */
      cov_29e27zkmsq().b[10][1]++;
      cov_29e27zkmsq().s[30]++;
      if (exception instanceof Error) {
        /* istanbul ignore next */
        cov_29e27zkmsq().b[14][0]++;
        cov_29e27zkmsq().s[31]++;
        message = exception.message;
        /* istanbul ignore next */
        cov_29e27zkmsq().s[32]++;
        code = exception.name;
        /* istanbul ignore next */
        cov_29e27zkmsq().s[33]++;
        this.logger.error(`Unhandled exception: ${exception.message}`, exception.stack);
      } else
      /* istanbul ignore next */
      {
        cov_29e27zkmsq().b[14][1]++;
      }
    }
    // Generate request ID for tracking
    const requestId =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[34]++, `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`);
    const errorResponse =
    /* istanbul ignore next */
    (cov_29e27zkmsq().s[35]++, {
      error: {
        code,
        message,
        details,
        timestamp: new Date().toISOString(),
        requestId
      }
    });
    /* istanbul ignore next */
    cov_29e27zkmsq().s[36]++;
    response.status(status).json(errorResponse);
  }
});
/* istanbul ignore next */
cov_29e27zkmsq().s[37]++;
exports.AllExceptionsFilter = AllExceptionsFilter;
/* istanbul ignore next */
cov_29e27zkmsq().s[38]++;
exports.AllExceptionsFilter = AllExceptionsFilter = AllExceptionsFilter_1 = __decorate([(0, common_1.Catch)()], AllExceptionsFilter);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjllMjd6a21zcSIsImFjdHVhbENvdmVyYWdlIiwiY29tbW9uXzEiLCJzIiwicmVxdWlyZSIsIkFsbEV4Y2VwdGlvbnNGaWx0ZXIiLCJBbGxFeGNlcHRpb25zRmlsdGVyXzEiLCJsb2dnZXIiLCJMb2dnZXIiLCJuYW1lIiwiY2F0Y2giLCJleGNlcHRpb24iLCJob3N0IiwiZiIsImN0eCIsInN3aXRjaFRvSHR0cCIsInJlc3BvbnNlIiwiZ2V0UmVzcG9uc2UiLCJzdGF0dXMiLCJIdHRwU3RhdHVzIiwiSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwibWVzc2FnZSIsImNvZGUiLCJkZXRhaWxzIiwidW5kZWZpbmVkIiwiSHR0cEV4Y2VwdGlvbiIsImIiLCJnZXRTdGF0dXMiLCJleGNlcHRpb25SZXNwb25zZSIsImNvbnN0cnVjdG9yIiwicmVzcG9uc2VPYmoiLCJFcnJvciIsImVycm9yIiwic3RhY2siLCJyZXF1ZXN0SWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiZXJyb3JSZXNwb25zZSIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwianNvbiIsImV4cG9ydHMiLCJfX2RlY29yYXRlIiwiQ2F0Y2giXSwic291cmNlcyI6WyIvaG9tZS9sdWlzbmV0bzk4L0RvY3VtZW50b3MvQ29kZS9tb25vcmVwby12dGV4L2FwcHMvYXBpL3NyYy9jb21tb24vZmlsdGVycy9hbGwtZXhjZXB0aW9ucy5maWx0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRXhjZXB0aW9uRmlsdGVyLFxuICBDYXRjaCxcbiAgQXJndW1lbnRzSG9zdCxcbiAgSHR0cEV4Y2VwdGlvbixcbiAgSHR0cFN0YXR1cyxcbiAgTG9nZ2VyLFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuXG5AQ2F0Y2goKVxuZXhwb3J0IGNsYXNzIEFsbEV4Y2VwdGlvbnNGaWx0ZXIgaW1wbGVtZW50cyBFeGNlcHRpb25GaWx0ZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlciA9IG5ldyBMb2dnZXIoQWxsRXhjZXB0aW9uc0ZpbHRlci5uYW1lKTtcblxuICBjYXRjaChleGNlcHRpb246IHVua25vd24sIGhvc3Q6IEFyZ3VtZW50c0hvc3QpIHtcbiAgICBjb25zdCBjdHggPSBob3N0LnN3aXRjaFRvSHR0cCgpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gY3R4LmdldFJlc3BvbnNlPFJlc3BvbnNlPigpO1xuXG4gICAgbGV0IHN0YXR1cyA9IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SO1xuICAgIGxldCBtZXNzYWdlID0gJ0ludGVybmFsIHNlcnZlciBlcnJvcic7XG4gICAgbGV0IGNvZGUgPSAnSW50ZXJuYWxTZXJ2ZXJFcnJvcic7XG4gICAgbGV0IGRldGFpbHM6IGFueSA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChleGNlcHRpb24gaW5zdGFuY2VvZiBIdHRwRXhjZXB0aW9uKSB7XG4gICAgICBzdGF0dXMgPSBleGNlcHRpb24uZ2V0U3RhdHVzKCk7XG4gICAgICBjb25zdCBleGNlcHRpb25SZXNwb25zZSA9IGV4Y2VwdGlvbi5nZXRSZXNwb25zZSgpO1xuICAgICAgY29kZSA9IGV4Y2VwdGlvbi5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgICBpZiAodHlwZW9mIGV4Y2VwdGlvblJlc3BvbnNlID09PSAnb2JqZWN0JyAmJiBleGNlcHRpb25SZXNwb25zZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCByZXNwb25zZU9iaiA9IGV4Y2VwdGlvblJlc3BvbnNlIGFzIGFueTtcbiAgICAgICAgbWVzc2FnZSA9IHJlc3BvbnNlT2JqLm1lc3NhZ2UgfHwgZXhjZXB0aW9uLm1lc3NhZ2U7XG4gICAgICAgIGRldGFpbHMgPSByZXNwb25zZU9iai5kZXRhaWxzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9IGV4Y2VwdGlvbi5tZXNzYWdlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXhjZXB0aW9uIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIG1lc3NhZ2UgPSBleGNlcHRpb24ubWVzc2FnZTtcbiAgICAgIGNvZGUgPSBleGNlcHRpb24ubmFtZTtcblxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYFVuaGFuZGxlZCBleGNlcHRpb246ICR7ZXhjZXB0aW9uLm1lc3NhZ2V9YCwgZXhjZXB0aW9uLnN0YWNrKTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSByZXF1ZXN0IElEIGZvciB0cmFja2luZ1xuICAgIGNvbnN0IHJlcXVlc3RJZCA9IGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG5cbiAgICBjb25zdCBlcnJvclJlc3BvbnNlID0ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgZGV0YWlscyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIHJlc3BvbnNlLnN0YXR1cyhzdGF0dXMpLmpzb24oZXJyb3JSZXNwb25zZSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFnQkk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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