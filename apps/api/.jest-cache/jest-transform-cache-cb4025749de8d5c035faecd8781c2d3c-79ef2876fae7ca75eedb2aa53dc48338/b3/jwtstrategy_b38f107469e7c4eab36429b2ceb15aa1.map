{"version":3,"names":["cov_ypfdp9utd","actualCoverage","passport_jwt_1","s","require","passport_1","common_1","config_1","JwtStrategy","PassportStrategy","Strategy","constructor","configService","f","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","ignoreExpiration","secretOrKey","get","validate","payload","sub","email","role","exports","__decorate","Injectable","ConfigService"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/auth/strategies/jwt.strategy.ts"],"sourcesContent":["import { ExtractJwt, Strategy } from 'passport-jwt';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Injectable } from '@nestjs/common';\nimport { ConfigService } from '@nestjs/config';\n\n@Injectable()\nexport class JwtStrategy extends PassportStrategy(Strategy) {\n  constructor(configService: ConfigService) {\n    super({\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      ignoreExpiration: false,\n      secretOrKey: configService.get<string>('jwt.secret'),\n    });\n  }\n\n  async validate(payload: any) {\n    return { sub: payload.sub, email: payload.email, role: payload.role };\n  }\n}\n"],"mappings":"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","ignoreList":[]}