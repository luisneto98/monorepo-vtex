{"file":"/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/press-materials/schemas/press-material.schema.ts","mappings":"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","names":[],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/press-materials/schemas/press-material.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document, HydratedDocument } from 'mongoose';\nimport {\n  PressMaterialType,\n  LocalizedString,\n  FileMetadata,\n  PublicationStatus,\n  AccessLevel,\n} from '@vtexday26/shared';\n\nexport type PressMaterialDocument = HydratedDocument<PressMaterial>;\n\n@Schema({ collection: 'press_materials', timestamps: true })\nexport class PressMaterial extends Document {\n  @Prop({\n    type: String,\n    enum: ['press_kit', 'logo_package', 'photo', 'video', 'presentation'],\n    required: true,\n    index: true,\n  })\n  type: PressMaterialType;\n\n  @Prop({\n    type: {\n      pt: { type: String, required: true },\n      en: { type: String, required: true },\n      es: { type: String, required: true },\n    },\n    required: true,\n  })\n  title: LocalizedString;\n\n  @Prop({\n    type: {\n      pt: { type: String, default: '' },\n      en: { type: String, default: '' },\n      es: { type: String, default: '' },\n    },\n  })\n  description: LocalizedString;\n\n  @Prop({ required: true })\n  fileUrl: string;\n\n  @Prop({ type: String })\n  thumbnailUrl?: string;\n\n  @Prop({\n    type: {\n      size: { type: Number, required: true },\n      format: { type: String, required: true },\n      width: { type: Number },\n      height: { type: Number },\n      duration: { type: Number },\n    },\n    required: true,\n  })\n  metadata: FileMetadata;\n\n  @Prop({ type: [String], index: true, default: [] })\n  tags: string[];\n\n  @Prop({\n    type: String,\n    enum: ['draft', 'published', 'archived'],\n    default: 'draft',\n    index: true,\n  })\n  status: PublicationStatus;\n\n  @Prop({\n    type: String,\n    enum: ['public', 'restricted'],\n    default: 'public',\n    index: true,\n  })\n  accessLevel: AccessLevel;\n\n  @Prop({ default: 0 })\n  downloadCount: number;\n\n  @Prop({ required: true })\n  uploadedBy: string;\n}\n\nexport const PressMaterialSchema = SchemaFactory.createForClass(PressMaterial);\n\n// Create compound indexes for better query performance\nPressMaterialSchema.index({ status: 1, accessLevel: 1, type: 1 });\nPressMaterialSchema.index({\n  'title.pt': 'text',\n  'title.en': 'text',\n  'title.es': 'text',\n  tags: 'text',\n});\nPressMaterialSchema.index({ createdAt: -1 });\nPressMaterialSchema.index({ downloadCount: -1 });\n"],"version":3}