{"version":3,"names":["cov_1p42nijcwv","actualCoverage","s","client_s3_1","require","createS3Client","configService","f","region","get","accessKeyId","secretAccessKey","b","console","warn","S3Client","credentials","exports","getS3BucketName","bucket","S3_CONFIG","MAX_FILE_SIZE","video","default","ALLOWED_FORMATS","press_kit","logo_package","photo","presentation","URL_EXPIRY"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/config/s3.config.ts"],"sourcesContent":["import { S3Client } from '@aws-sdk/client-s3';\nimport { ConfigService } from '@nestjs/config';\n\nexport const createS3Client = (configService: ConfigService) => {\n  const region = configService.get('aws.s3.region');\n  const accessKeyId = configService.get('aws.s3.accessKeyId');\n  const secretAccessKey = configService.get('aws.s3.secretAccessKey');\n\n  if (!accessKeyId || !secretAccessKey) {\n    console.warn('AWS credentials not configured, using default chain');\n  }\n\n  return new S3Client({\n    region,\n    ...(accessKeyId &&\n      secretAccessKey && {\n        credentials: {\n          accessKeyId,\n          secretAccessKey,\n        },\n      }),\n  });\n};\n\nexport const getS3BucketName = (configService: ConfigService): string => {\n  const bucket = configService.get<string>('aws.s3.bucket');\n  if (!bucket) {\n    console.warn('S3 bucket name not configured, using default: vtexday-dev-bucket');\n    return 'vtexday-dev-bucket';\n  }\n  return bucket;\n};\n\nexport const S3_CONFIG = {\n  MAX_FILE_SIZE: {\n    video: 500 * 1024 * 1024, // 500MB\n    default: 50 * 1024 * 1024, // 50MB\n  },\n  ALLOWED_FORMATS: {\n    press_kit: ['pdf', 'zip'],\n    logo_package: ['zip', 'ai', 'eps', 'svg'],\n    photo: ['jpg', 'jpeg', 'png', 'webp'],\n    video: ['mp4', 'mov', 'webm'],\n    presentation: ['ppt', 'pptx', 'pdf'],\n  },\n  URL_EXPIRY: 24 * 60 * 60, // 24 hours in seconds\n};\n"],"mappings":"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","ignoreList":[]}