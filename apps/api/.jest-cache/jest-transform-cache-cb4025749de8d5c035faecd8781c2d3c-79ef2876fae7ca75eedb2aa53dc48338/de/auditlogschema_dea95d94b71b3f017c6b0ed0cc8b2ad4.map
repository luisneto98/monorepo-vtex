{"version":3,"names":["cov_1ifknl7wrc","actualCoverage","mongoose_1","s","require","PerformedBy","id","name","email","role","exports","__decorate","Prop","required","Schema","_id","NewsReleaseAuditLog","entityId","entityType","action","performedBy","changes","metadata","ipAddress","userAgent","index","default","enum","type","Object","timestamps","createdAt","updatedAt","NewsReleaseAuditLogSchema","SchemaFactory","createForClass","timestamp"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/news-releases/schemas/audit-log.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document } from 'mongoose';\n\nexport type NewsReleaseAuditLogDocument = NewsReleaseAuditLog & Document;\n\n@Schema({ _id: false })\nexport class PerformedBy {\n  @Prop({ required: true })\n  id: string;\n\n  @Prop({ required: true })\n  name: string;\n\n  @Prop({ required: true })\n  email: string;\n\n  @Prop({ required: true })\n  role: string;\n}\n\n@Schema({ timestamps: { createdAt: 'timestamp', updatedAt: false } })\nexport class NewsReleaseAuditLog {\n  @Prop({ required: true, index: true })\n  entityId: string;\n\n  @Prop({ required: true, default: 'news-release' })\n  entityType: string;\n\n  @Prop({\n    required: true,\n    enum: ['create', 'update', 'delete', 'publish', 'archive', 'restore'],\n    index: true,\n  })\n  action: string;\n\n  @Prop({ type: PerformedBy, required: true })\n  performedBy: PerformedBy;\n\n  @Prop({ type: Object })\n  changes?: Record<string, any>;\n\n  @Prop({ type: Object })\n  metadata?: Record<string, any>;\n\n  @Prop()\n  ipAddress?: string;\n\n  @Prop()\n  userAgent?: string;\n}\n\nexport const NewsReleaseAuditLogSchema = SchemaFactory.createForClass(NewsReleaseAuditLog);\n\nNewsReleaseAuditLogSchema.index({ entityId: 1, timestamp: -1 });\nNewsReleaseAuditLogSchema.index({ 'performedBy.id': 1 });\nNewsReleaseAuditLogSchema.index({ action: 1 });\n"],"mappings":"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","ignoreList":[]}