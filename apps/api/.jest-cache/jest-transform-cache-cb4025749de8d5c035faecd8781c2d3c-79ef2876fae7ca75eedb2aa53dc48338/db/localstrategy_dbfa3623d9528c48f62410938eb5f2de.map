{"version":3,"names":["cov_1ut8ef42qt","actualCoverage","passport_local_1","s","require","passport_1","common_1","auth_service_1","LocalStrategy","PassportStrategy","Strategy","authService","constructor","f","usernameField","validate","email","password","user","validateUser","b","UnauthorizedException","exports","__decorate","Injectable","AuthService"],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/auth/strategies/local.strategy.ts"],"sourcesContent":["import { Strategy } from 'passport-local';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Injectable, UnauthorizedException } from '@nestjs/common';\nimport { AuthService } from '../auth.service';\n\n@Injectable()\nexport class LocalStrategy extends PassportStrategy(Strategy) {\n  constructor(private authService: AuthService) {\n    super({ usernameField: 'email' });\n  }\n\n  async validate(email: string, password: string): Promise<any> {\n    const user = await this.authService.validateUser(email, password);\n    if (!user) {\n      throw new UnauthorizedException('Invalid credentials');\n    }\n    return user;\n  }\n}\n"],"mappings":"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","ignoreList":[]}