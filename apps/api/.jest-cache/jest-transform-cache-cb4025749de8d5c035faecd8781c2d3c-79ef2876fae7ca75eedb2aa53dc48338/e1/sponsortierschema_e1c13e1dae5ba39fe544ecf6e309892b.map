{"file":"/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/sponsors/schemas/sponsor-tier.schema.ts","mappings":";;;;;;;;;;;;AAAA,+CAA+D;AAO/D,IAAM,WAAW,GAAjB,MAAM,WAAW;IAMf,OAAO,CAAS;IAOhB,IAAI,CAAS;CACd,CAAA;AARC;IALC,IAAA,eAAI,EAAC;QACJ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,EAAE;KACd,CAAC;;0CACc;AAOhB;IALC,IAAA,eAAI,EAAC;QACJ,QAAQ,EAAE,IAAI;QACd,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,EAAE;KACd,CAAC;;uCACW;AAbT,WAAW;IADhB,IAAA,iBAAM,EAAC,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC;GACjB,WAAW,CAchB;AAGM,IAAM,WAAW,GAAjB,MAAM,WAAW;IAOtB,IAAI,CAAS;IAMb,WAAW,CAGT;IAOF,KAAK,CAAS;IAOd,QAAQ,CAAS;CAClB,CAAA;AA/BY,kCAAW;AAOtB;IANC,IAAA,eAAI,EAAC;QACJ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,EAAE;KACd,CAAC;;yCACW;AAMb;IAJC,IAAA,eAAI,EAAC;QACJ,IAAI,EAAE,WAAW;QACjB,QAAQ,EAAE,IAAI;KACf,CAAC;;gDAIA;AAOF;IALC,IAAA,eAAI,EAAC;QACJ,QAAQ,EAAE,IAAI;QACd,MAAM,EAAE,IAAI;QACZ,GAAG,EAAE,CAAC;KACP,CAAC;;0CACY;AAOd;IALC,IAAA,eAAI,EAAC;QACJ,QAAQ,EAAE,IAAI;QACd,GAAG,EAAE,CAAC;QACN,OAAO,EAAE,CAAC;KACX,CAAC;;6CACe;sBA9BN,WAAW;IADvB,IAAA,iBAAM,EAAC,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,aAAa,EAAE,CAAC;GAC3C,WAAW,CA+BvB;AAEY,QAAA,iBAAiB,GAAG,wBAAa,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC;AAE3E,UAAU;AACV,yBAAiB,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;AACtC,yBAAiB,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;AAErC,6CAA6C;AAC7C,yBAAiB,CAAC,GAAG,CAAC,MAAM,EAAE,UAAU,IAAI;IAC1C,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;QACd,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IAC/B,CAAC;IACD,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC;QACrB,IAAI,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC;YAC9B,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;QAC/D,CAAC;QACD,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC;YAC3B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC;QACzD,CAAC;IACH,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC,CAAC;AAEH,iBAAiB;AACjB,yBAAiB,CAAC,OAAO,CAAC,kBAAkB,CAAC,GAAG,UAAU,QAAwB;IAChF,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,CAAC;AACvE,CAAC,CAAC","names":[],"sources":["/home/luisneto98/Documentos/Code/monorepo-vtex/apps/api/src/modules/sponsors/schemas/sponsor-tier.schema.ts"],"sourcesContent":["import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document } from 'mongoose';\nimport { SponsorTier as ISponsorTier } from '@shared/types/sponsor.types';\n\nexport type SponsorTierDocument = SponsorTier & Document;\n\n@Schema({ _id: false })\nclass DisplayName {\n  @Prop({\n    required: true,\n    trim: true,\n    maxlength: 50,\n  })\n  'pt-BR': string;\n\n  @Prop({\n    required: true,\n    trim: true,\n    maxlength: 50,\n  })\n  'en': string;\n}\n\n@Schema({ timestamps: true, collection: 'SponsorTier' })\nexport class SponsorTier implements Omit<ISponsorTier, '_id'> {\n  @Prop({\n    required: true,\n    unique: true,\n    trim: true,\n    maxlength: 50,\n  })\n  name: string;\n\n  @Prop({\n    type: DisplayName,\n    required: true,\n  })\n  displayName: {\n    'pt-BR': string;\n    en: string;\n  };\n\n  @Prop({\n    required: true,\n    unique: true,\n    min: 1,\n  })\n  order: number;\n\n  @Prop({\n    required: true,\n    min: 0,\n    default: 5,\n  })\n  maxPosts: number;\n}\n\nexport const SponsorTierSchema = SchemaFactory.createForClass(SponsorTier);\n\n// Indexes\nSponsorTierSchema.index({ order: 1 });\nSponsorTierSchema.index({ name: 1 });\n\n// Pre-save middleware for data normalization\nSponsorTierSchema.pre('save', function (next) {\n  if (this.name) {\n    this.name = this.name.trim();\n  }\n  if (this.displayName) {\n    if (this.displayName['pt-BR']) {\n      this.displayName['pt-BR'] = this.displayName['pt-BR'].trim();\n    }\n    if (this.displayName['en']) {\n      this.displayName['en'] = this.displayName['en'].trim();\n    }\n  }\n  next();\n});\n\n// Schema methods\nSponsorTierSchema.methods['getLocalizedName'] = function (language: 'pt-BR' | 'en'): string {\n  return this['displayName'][language] || this['displayName']['pt-BR'];\n};\n"],"version":3}