# Story 3.1: Setup e Navegação Base

## Status
Draft

## Story
**As a** desenvolvedor mobile,
**I want** estrutura de navegação configurada,
**so that** o app tenha fluxo intuitivo.

## Acceptance Criteria
1. React Navigation com tab bar inferior
2. Tabs: Home, Agenda, Buscar, Mais
3. Stack navigation para telas de detalhe
4. Splash screen com placeholder
5. Tratamento de deep links básico
6. Gesture handler para voltar

## Tasks / Subtasks
- [ ] Setup inicial do projeto React Native (AC: 1)
  - [ ] Inicializar novo app React Native em `apps/mobile/`
  - [ ] Configurar TypeScript 5.0+ conforme padrão do monorepo
  - [ ] Instalar dependências base (React Native, Metro bundler 0.76+)
  - [ ] Configurar estrutura de pastas conforme arquitetura definida
  - [ ] Integrar com workspace do monorepo

- [ ] Configurar sistema de navegação (AC: 1, 2, 3)
  - [ ] Instalar e configurar React Navigation
  - [ ] Criar Tab Navigator com 4 tabs principais
  - [ ] Configurar Stack Navigator para cada tab
  - [ ] Implementar navegação aninhada tab + stack
  - [ ] Criar componente TabBar customizado

- [ ] Implementar telas placeholder (AC: 2)
  - [ ] Criar screen Home básica em `src/screens/Home/`
  - [ ] Criar screen Agenda básica em `src/screens/Agenda/`
  - [ ] Criar screen Buscar básica em `src/screens/Search/`
  - [ ] Criar screen Mais básica em `src/screens/More/`
  - [ ] Adicionar placeholders visuais para identificação

- [ ] Configurar Splash Screen (AC: 4)
  - [ ] Instalar biblioteca de splash screen
  - [ ] Criar asset placeholder para splash
  - [ ] Configurar exibição nativa (iOS/Android)
  - [ ] Implementar fade-out após carregamento
  - [ ] Testar em ambas plataformas

- [ ] Implementar deep linking básico (AC: 5)
  - [ ] Configurar URL scheme do app
  - [ ] Implementar linking config no React Navigation
  - [ ] Criar rotas para principais seções
  - [ ] Adicionar handler para links externos
  - [ ] Testar deep links em desenvolvimento

- [ ] Adicionar gesture handlers (AC: 6)
  - [ ] Instalar react-native-gesture-handler
  - [ ] Configurar swipe back para iOS
  - [ ] Implementar gesture para Android
  - [ ] Adicionar animações de transição
  - [ ] Garantir acessibilidade nos gestos

- [ ] Configurar estado global com Zustand (Preparação)
  - [ ] Instalar Zustand 4.4+
  - [ ] Criar store base em `src/stores/`
  - [ ] Implementar hook useStore
  - [ ] Preparar estrutura para dados offline

- [ ] Setup de serviços e utilidades (Preparação)
  - [ ] Criar camada de serviços em `src/services/`
  - [ ] Implementar cliente API base (sem chamadas diretas)
  - [ ] Configurar tratamento de erros global
  - [ ] Criar utilities básicas em `src/utils/`

- [ ] Configurar ambiente de desenvolvimento
  - [ ] Setup de variáveis de ambiente (.env)
  - [ ] Configurar Metro bundler
  - [ ] Setup de debugging tools
  - [ ] Configurar hot reload

- [ ] Testes unitários básicos (Testing)
  - [ ] Configurar Jest + React Testing Library
  - [ ] Criar testes para navigation config
  - [ ] Testar renderização das telas placeholder
  - [ ] Testar deep link handlers
  - [ ] Garantir cobertura mínima de 60%

## Dev Notes

### Estrutura de Projeto Definida
O app mobile deve ser criado em `apps/mobile/` seguindo a estrutura:
```
apps/mobile/                 # React Native app
├── src/
│   ├── components/
│   ├── screens/
│   ├── navigation/
│   ├── services/
│   └── utils/
├── assets/
└── package.json
```
[Source: architecture/unified-project-structure.md]

### Stack Tecnológico Mobile
- **Linguagem**: TypeScript 5.0+ para desenvolvimento type-safe
- **Bundler**: Metro 0.76+ para bundling de assets
- **State Management**: Zustand 4.4+ com suporte TypeScript para web e mobile
- **Testing**: Jest + React Testing Library para testes unitários e integração
- **Autenticação**: JWT + Passport (preparar estrutura para integração futura)
[Source: architecture/tech-stack.md#technology-stack-table]

### Padrões de Código
- **Componentes**: PascalCase (ex: `UserProfile.tsx`)
- **Hooks**: camelCase com prefixo 'use' (ex: `useAuth.ts`)
- **Variáveis de ambiente**: SCREAMING_SNAKE_CASE (ex: `API_BASE_URL`)
- **Sempre definir tipos em** `packages/shared` e importar de lá
- **Nunca fazer chamadas HTTP diretas** - usar camada de serviços
- **Nunca mutar estado diretamente** - usar padrões apropriados
- **Usar async/await consistentemente**, tratar todas rejeições de promise
[Source: architecture/coding-standards.md#naming-conventions, #critical-fullstack-rules]

### Integração com Monorepo
- O app mobile faz parte dos workspaces npm: `"workspaces": ["apps/*", "packages/*"]`
- Deve importar tipos compartilhados de `packages/shared/src/types/`
- Seguir convenções de build e scripts do monorepo
[Source: package.json, architecture/coding-standards.md]

### Modelos de Dados Relevantes
Tipos disponíveis em `packages/shared/src/types/` que serão usados:
- **IUser**: Interface com perfil, preferências, notificationsEnabled, favoriteSessionIds
- **ISession**: Suporte multilíngue (pt-BR, en)
- **ISpeaker**: Palestrantes com links sociais
- **ISponsor**: Patrocinadores com sistema de tiers
[Source: architecture/data-models.md]

### Notas de Implementação
- React Native versão específica não documentada - usar versão estável mais recente
- Biblioteca de navegação não especificada - usar React Navigation (padrão de mercado)
- Configurar para suporte offline futuro com AsyncStorage
- Preparar estrutura para push notifications (será implementado na story 3.6)
- E2E testing com Playwright suporta viewports mobile
[Source: architecture/tech-stack.md, gaps identificados na análise]

### Testing Standards
- **Localização de testes**: `apps/mobile/tests/` com subpastas unit/, integration/, e2e/
- **Cobertura mínima**: 60% para testes unitários (Testing Pyramid)
- **Framework**: Jest + React Testing Library
- **Estrutura de testes**:
  ```
  apps/mobile/tests/
  ├── unit/
  │   ├── components/
  │   ├── hooks/
  │   └── utils/
  ├── integration/
  │   └── services/
  └── e2e/
      └── user-flows/
  ```
- **E2E pode usar Playwright** com suporte para viewports mobile
[Source: architecture/testing-strategy.md#testing-pyramid, #frontend-tests]

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-29 | 1.0 | Story criada com base no Épico 3 e arquitetura | Bob (Scrum Master) |

## Dev Agent Record
*(Esta seção será preenchida pelo agente de desenvolvimento durante a implementação)*

### Agent Model Used
*(A ser preenchido)*

### Debug Log References
*(A ser preenchido)*

### Completion Notes List
*(A ser preenchido)*

### File List
*(A ser preenchido)*

## QA Results
*(Esta seção será preenchida pelo agente de QA após revisão)*