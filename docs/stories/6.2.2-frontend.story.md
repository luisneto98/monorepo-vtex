---
title: Frontend Admin - General Event Settings Module
section: 6.2.2
type: frontend
epic: Event Configuration Management
priority: high
estimated_hours: 4
dependencies: [6.2.1-backend]
status: APPROVED
---

# User Story: Frontend Admin for General Event Settings

## Story
**As an** event administrator
**I want** a user-friendly interface to manage general event settings
**So that** I can configure all event details through the admin panel

## Background
This story implements the frontend admin interface for the General Event Settings module, integrating with the backend API created in story 6.2.1. It follows existing admin panel patterns from modules like `VisibilityControl`.

## Acceptance Criteria

### UI Components
- [ ] Settings form page accessible from admin menu
- [ ] Multi-language input fields for event name
- [ ] Date pickers for start and end dates
- [ ] Address form with all venue fields
- [ ] Contact information inputs with masks
- [ ] Social media links section
- [ ] Interactive map for coordinate selection

### Form Validations
- [ ] Required field validation
- [ ] Email format validation
- [ ] Phone number format with mask
- [ ] URL validation for social links
- [ ] Date range validation (end > start)
- [ ] Real-time validation feedback

### User Experience
- [ ] Loading state while fetching data
- [ ] Success/error notifications
- [ ] Unsaved changes warning
- [ ] Auto-save draft capability
- [ ] Responsive design for mobile/tablet

### Functionality
- [ ] Load existing settings on mount
- [ ] Save changes with optimistic updates
- [ ] Reset form to last saved state
- [ ] Preview mode for reviewing changes
- [ ] Keyboard navigation support

## Tasks / Subtasks

### 1. Page Setup (30 min)
- [ ] Create EventSettings.tsx page component
- [ ] Add route to admin routing
- [ ] Add menu item to admin navigation
- [ ] Setup page layout with Card component

### 2. Component Creation (60 min)
- [ ] Create EventBasicInfo component (name, dates)
- [ ] Create VenueSection component (address fields)
- [ ] Create ContactSection component (email, phone, whatsapp)
- [ ] Create SocialMediaSection component (social links)
- [ ] Create MapSelector component (coordinate picker)

### 3. Service & Hook Setup (30 min)
- [ ] Create event-settings.service.ts
- [ ] Create useEventSettings custom hook
- [ ] Setup React Query for data fetching
- [ ] Implement optimistic updates

### 4. Form Implementation (45 min)
- [ ] Setup React Hook Form
- [ ] Add form validation rules
- [ ] Implement multi-language inputs
- [ ] Add input masks for phone
- [ ] Setup date pickers with validation

### 5. UI/UX Features (45 min)
- [ ] Add loading states
- [ ] Implement error handling
- [ ] Add success/error toast notifications
- [ ] Implement unsaved changes warning
- [ ] Add form reset functionality

### 6. Map Integration (30 min)
- [ ] Integrate map library (Leaflet or Google Maps)
- [ ] Add coordinate picker
- [ ] Display venue location
- [ ] Add map validation

### 7. Testing (60 min)
- [ ] Write unit tests for components
- [ ] Test form validation logic
- [ ] Write integration tests
- [ ] Test accessibility (WCAG 2.1)
- [ ] Verify responsive design

### 8. Polish & Integration (30 min)
- [ ] Add help tooltips
- [ ] Verify mobile responsiveness
- [ ] Test full user flow
- [ ] Update documentation

## Dev Notes

### Technical Context
- Frontend uses React 18 with TypeScript
- UI components from shadcn/ui library
- Form management with React Hook Form v7
- Server state with React Query (TanStack Query)
- Styling with Tailwind CSS
- Follow patterns from existing admin pages (VisibilityControl.tsx)

### Key Implementation Details
1. **Form State**: Use React Hook Form with resolver for validation
2. **API Integration**: Use React Query with staleTime: 5 minutes
3. **Optimistic Updates**: Update UI immediately, rollback on error
4. **Input Masks**: Use react-input-mask for phone formatting
5. **Map Library**: Prefer Leaflet for open-source, Google Maps if API key available
6. **Validation Patterns**:
   - Email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/
   - URL: /^https?:\/\/.+\..+/
   - Phone: Support international formats

### Component Dependencies
- UI Components: apps/admin/src/components/ui/
- API Client: apps/admin/src/lib/api.ts
- Auth Context: apps/admin/src/contexts/AuthContext.tsx
- Toast System: apps/admin/src/hooks/use-toast.ts

### Accessibility Requirements
- All form inputs must have labels
- Error messages must be announced
- Keyboard navigation for all interactive elements
- ARIA attributes for dynamic content
- Focus management in tabs

## Technical Notes

### File Structure
```
apps/admin/src/
├── pages/
│   └── EventSettings.tsx
├── components/
│   └── event-settings/
│       ├── EventBasicInfo.tsx
│       ├── VenueSection.tsx
│       ├── ContactSection.tsx
│       ├── SocialMediaSection.tsx
│       └── MapSelector.tsx
├── services/
│   └── event-settings.service.ts
└── hooks/
    └── useEventSettings.ts
```

### Component Structure
```typescript
// EventSettings.tsx
const EventSettings: React.FC = () => {
  return (
    <Card>
      <CardHeader>
        <CardTitle>Configurações Gerais do Evento</CardTitle>
        <CardDescription>
          Gerencie as informações básicas do VTEX Day 2026
        </CardDescription>
      </CardHeader>
      <CardContent>
        <Form onSubmit={handleSubmit}>
          <Tabs defaultValue="basic">
            <TabsList>
              <TabsTrigger value="basic">Informações Básicas</TabsTrigger>
              <TabsTrigger value="venue">Local</TabsTrigger>
              <TabsTrigger value="contact">Contato</TabsTrigger>
              <TabsTrigger value="social">Redes Sociais</TabsTrigger>
            </TabsList>

            <TabsContent value="basic">
              <EventBasicInfo />
            </TabsContent>

            <TabsContent value="venue">
              <VenueSection />
              <MapSelector />
            </TabsContent>

            <TabsContent value="contact">
              <ContactSection />
            </TabsContent>

            <TabsContent value="social">
              <SocialMediaSection />
            </TabsContent>
          </Tabs>

          <FormActions>
            <Button variant="outline" onClick={handleReset}>
              Cancelar
            </Button>
            <Button type="submit" loading={isSaving}>
              Salvar Alterações
            </Button>
          </FormActions>
        </Form>
      </CardContent>
    </Card>
  );
};
```

### Service Integration
```typescript
// event-settings.service.ts
export class EventSettingsService {
  private readonly baseURL = '/api/event-settings';

  async getSettings(): Promise<EventSettings> {
    const response = await api.get(this.baseURL);
    return response.data;
  }

  async updateSettings(data: UpdateEventSettingsDto): Promise<EventSettings> {
    const response = await api.put(this.baseURL, data);
    return response.data;
  }
}
```

### State Management
- React Hook Form for form state
- React Query for server state
- Local state for UI interactions
- Context API for shared data if needed

### UI Libraries
- Shadcn/ui components
- React Hook Form
- React Query
- React DatePicker
- React Input Mask
- Leaflet/Google Maps React

## Testing

### Unit Tests
- [ ] Component rendering tests
- [ ] Form validation logic
- [ ] Service methods
- [ ] Custom hooks

### Integration Tests
- [ ] Form submission flow
- [ ] API error handling
- [ ] State management

### Accessibility Tests
- [ ] WCAG 2.1 compliance
- [ ] Keyboard navigation
- [ ] Screen reader compatibility

### E2E Tests
- [ ] Complete user flow
- [ ] Error scenarios
- [ ] Mobile responsiveness

### Test Frameworks
- Jest + React Testing Library for unit tests
- MSW for API mocking
- Playwright or Cypress for E2E

## Definition of Done
- [ ] All components implemented
- [ ] Form validations working
- [ ] API integration complete
- [ ] Responsive design verified
- [ ] Tests passing (>80% coverage)
- [ ] Code review approved
- [ ] Deployed to development

## Dependencies
- Story 6.2.1 (Backend API) must be completed
- Event settings API endpoints available
- Authentication/authorization configured
- UI component library setup

## Mockups/Design
- Follow existing admin panel design patterns
- Use consistent spacing and typography
- Implement loading/error states
- Include help tooltips for complex fields

## Notes
- Consider adding import/export functionality in future
- Map component can be enhanced with venue search
- Social media preview could be added later
- Consider multi-timezone support for international events

## Change Log

| Date | Author | Description |
|------|--------|-------------|
| 2025-09-27 | Sarah (PO) | Initial story creation |
| 2025-09-27 | Sarah (PO) | Added missing sections per template requirements |

## Dev Agent Record

_No development activity yet_

## QA Results

_Pending implementation_