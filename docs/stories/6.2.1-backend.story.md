---
title: Backend API - General Event Settings Module
section: 6.2.1
type: backend
epic: Event Configuration Management
priority: high
estimated_hours: 4
---

# User Story: Backend API for General Event Settings

## Story
**As a** system administrator
**I want** a complete backend API for managing general event settings
**So that** the system can store and provide event configuration data to all consumers

## Background
The VTEX Day 2026 platform needs centralized event configuration management. This story implements the backend API module following existing patterns from modules like `system-config` and `speakers`.

## Acceptance Criteria

### API Endpoints
- [ ] GET `/api/event-settings` - Retrieve current event settings
- [ ] PUT `/api/event-settings` - Update event settings (admin only)
- [ ] GET `/api/event-settings/public` - Public endpoint for frontend consumption

### Data Model
- [ ] Event name (multilingual support: pt-BR, en, es)
- [ ] Start and end dates with timezone support
- [ ] Venue information (name, full address)
- [ ] Contact details (email, phone, WhatsApp)
- [ ] Social media links object
- [ ] Map coordinates (latitude, longitude)

### Business Rules
- [ ] Only one event settings document can exist (singleton pattern)
- [ ] Auto-create default settings on first access
- [ ] Date validation (end date must be after start date)
- [ ] Email and phone format validation
- [ ] URL validation for social media links
- [ ] Coordinate validation (-90 to 90 lat, -180 to 180 lng)

### Security
- [ ] JWT authentication required for all endpoints
- [ ] Role-based access (ADMIN for updates)
- [ ] Public endpoint returns sanitized data only

### Technical Requirements
- [ ] MongoDB schema with Mongoose
- [ ] DTOs for validation
- [ ] Proper error handling
- [ ] Response caching (5 minutes for public endpoint)

## Technical Notes

### File Structure
```
apps/api/src/modules/event-settings/
├── event-settings.module.ts
├── event-settings.controller.ts
├── event-settings.service.ts
├── schemas/
│   └── event-settings.schema.ts
├── dto/
│   ├── create-event-settings.dto.ts
│   └── update-event-settings.dto.ts
└── interfaces/
    └── event-settings.interface.ts
```

### Schema Definition
```typescript
// event-settings.schema.ts
@Schema({ collection: 'event_settings' })
export class EventSettings {
  @Prop({
    type: {
      pt: { type: String, required: true },
      en: { type: String, required: true },
      es: { type: String, required: true }
    }
  })
  eventName: {
    pt: string;
    en: string;
    es: string;
  };

  @Prop({ required: true })
  startDate: Date;

  @Prop({ required: true })
  endDate: Date;

  @Prop({
    type: {
      name: { type: String, required: true },
      address: { type: String, required: true },
      city: { type: String, required: true },
      state: { type: String, required: true },
      zipCode: { type: String, required: true },
      complement: String
    }
  })
  venue: VenueInfo;

  @Prop({
    type: {
      email: { type: String, required: true },
      phone: { type: String, required: true },
      whatsapp: String
    }
  })
  contact: ContactInfo;

  @Prop({
    type: {
      instagram: String,
      facebook: String,
      linkedin: String,
      twitter: String,
      youtube: String
    }
  })
  socialMedia: SocialMediaLinks;

  @Prop({
    type: {
      latitude: { type: Number, required: true },
      longitude: { type: Number, required: true }
    }
  })
  mapCoordinates: MapCoordinates;

  @Prop({ default: Date.now })
  updatedAt: Date;

  @Prop({ required: true })
  updatedBy: string;
}
```

### Integration Points
- Register module in `app.module.ts`
- Add to Swagger documentation
- Export types to shared package

## Testing Requirements
- [ ] Unit tests for service methods (>80% coverage)
- [ ] Integration tests for all endpoints
- [ ] Validation tests for DTOs
- [ ] Edge cases (invalid dates, coordinates)

## Definition of Done
- [ ] Code follows project standards
- [ ] All tests passing
- [ ] API documentation updated
- [ ] Postman collection updated
- [ ] Code reviewed and approved
- [ ] Deployed to development environment

## Dependencies
- Existing JWT authentication module
- MongoDB connection
- Shared types package

## Notes
- Follow existing patterns from `system-config` module
- Ensure backward compatibility for future additions
- Consider adding audit log for changes